<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <sql-query name="getTodoAsyncJamesMailQuery">
        <![CDATA[
		select t1.mailbox_id as mailbox_id,
		       t1.mail_uid   as mail_uid,
		       t3.user_name  as user_name
		  from JAMES_MAIL t1
		  left join JAMES_MAILBOX t3
		    on t1.mailbox_id = t3.mailbox_id
		   and t3.mailbox_name = 'INBOX'
		 where not exists (select t2.uuid
		          from JAMES_MAIL_ASYNC t2
		         where t1.mailbox_id = t2.mailbox_id
		           and t1.mail_uid = t2.mail_uid)
	]]>
    </sql-query>

    <sql-query name="getMailboxLastUid">
        <![CDATA[
		select t1.MAILBOX_LAST_UID as mailbox_last_uid
		  from JAMES_MAILBOX t1
		 where t1.MAILBOX_NAME='INBOX' and t1.USER_NAME = :userName
	]]>
    </sql-query>

</hibernate-mapping>