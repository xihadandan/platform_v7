<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>

    <sql-query name="exchangeLogDataQuery">
        <![CDATA[
		   select * from
			   (select a.uuid uuid,
					a.rec_ver rec_ver,
					a.creator creator,
					a.create_time create_time,
					a.modifier modifier,
					a.modify_time modify_time,
					a.batch_id batch_id,
					a.node node,
					b.name|| '('|| a.from_Unit_Id ||')' from_unit_id,
					a.msg msg
				from ${username}.exchange_log a, unit_common_unit b
				where (a.from_unit_id = b.id or a.from_unit_id = b.unit_id))
			where  1 = 1
			  <if isNotBlank(keyword)>
		           and (batch_id like '%' || :keyword || '%'
		               or from_unit_id like '%' || :keyword || '%')
		      </if>
		      <if isNotBlank(whereSql)>
		        and ${whereSql}
		      </if>
		    <if isNotBlank(orderBy)>
		        ${orderBy}
		      </if>
		    ]]>
    </sql-query>
</hibernate-mapping>