/** 流程连续签批 */
// FIXME: 顶部操作栏背景为带颜色的 PNG 图片，无法于主题色关联

.lxqp-wrap {
  position: relative;
  z-index: 99;

  .lxqp-loading {
    .box(fixed);

    z-index: 999998;
    background: @component-background;
  }
}

// 顶部操作栏
.lxqp-wrap .top-control {
  .fixed(-65px false false 50%);
  .size(464px 65px);

  z-index: 999999;
  margin-left: -232px;
  line-height: 52px;
  background: url('@{image-url-prefix}/workflow/lxqp_bg.@{theme-color}.png') no-repeat;
  background-size: cover;
  text-align: center;
  transition: all @animation-duration-slow;

  // 顶部操作栏按钮
  .lxqp-btn {
    position: relative;
    display: inline-block;
    padding: 0 10px;
    font-size: @font-size-base;
    color: @text-color-inverse;
    line-height: 32px;
    cursor: pointer;
    border-radius: 16px;
    transition: all @animation-duration-base;

    // 顶部操作栏按钮图标
    i {
      margin-right: 2px;
      font-size: @font-size-xl;
    }

    // 顶部操作栏按钮文本
    span {
      vertical-align: top;
    }

    &:hover {
      background: @primary-4;
    }

    &:active {
      background: @primary-3;
    }

    &:last-child {
      margin-left: 10px;

      &::before {
        .absolute(8px false 9px -8px);

        content: '';
        width: 1px;
        background: rgba(255, 255, 255, 0.2);
      }
    }

    &.disabled {
      opacity: 0.5;
      cursor: default;

      &:hover,
      &:active {
        background: none;
      }
    }
  }
}

// 左侧操作栏
.lxqp-wrap .left-control {
  // 展开折叠按钮
  .icon {
    .fixed(60px false false -80px);
    .square(48px);

    z-index: 999999;
    line-height: 48px;
    padding: 0 8px;
    color: @text-color-inverse;
    background: @primary-color;
    box-shadow: 0 0 16px 0 @primary-color;
    border-top-right-radius: 50%;
    border-bottom-right-radius: 50%;
    cursor: pointer;
    transition: all @animation-duration-base;

    // 展开折叠按钮 - 图标
    i {
      font-size: @font-size-lg;
      color: @text-color-inverse;
    }

    // 展开折叠按钮 - 待办数量徽标
    .badge {
      .absolute(8px false false 20px);

      height: 20px;
      padding: 0 5px;
      line-height: 20px;
      font-size: @font-size-sm;
      color: @text-color-inverse;
      background: @danger-color;
      border-radius: 10px;
    }
  }

  // 待办列表
  .lxqp-left-wrap {
    .fixed(0 false 0 -450px);

    z-index: 999999;
    width: 450px;
    padding-top: 45px;
    box-shadow: 0 2px 16px 0 rgba(0, 0, 0, 0.15);
    background: @component-background;
    overflow: hidden;
    transition: all @animation-duration-base;

    // 待办列表 - 头部
    .lxqp-left-header {
      .absolute(0 false false 0);
      .size(100% 45px);

      padding: 0 7px;
      line-height: 44px;
      background: @background-lighter;
      border-bottom: @border-default;

      i {
        font-size: @font-size-xl;
      }

      // 待办列表 - 标题
      .title {
        display: inline-block;
        font-size: @font-size-lg;
        font-weight: bold;
        color: @text-color-dark;

        .badge {
          .absolute(8px false false 73px);

          height: 20px;
          padding: 0 5px;
          line-height: 20px;
          font-size: @font-size-sm;
          color: @text-color-inverse;
          background: @danger-color;
          border-radius: 10px;
        }
      }

      // 待办列表 - 搜索框
      .search {
        .size(202px 34px);

        position: relative;
        display: inline-block;
        line-height: 44px;
        overflow: hidden;
        vertical-align: middle;
        transition: all @animation-duration-base;

        input {
          .absolute(0 -120% false false);

          transition: all @animation-duration-base;
        }

        .search-icon {
          .absolute(0 0 false false);
          .square(34px);

          line-height: 34px;
          font-size: @font-size-xl;
          color: @text-color-primary;
          text-align: center;
          cursor: pointer;
        }

        .clear {
          .absolute(8px 36px false false);
          .square(18px);

          line-height: 18px;
          background: #eee;
          border-radius: 50%;
          text-align: center;
          cursor: pointer;

          i {
            line-height: 18px;
            font-size: @font-size-sm;
            color: @text-color-light;
          }

          &:hover i {
            color: @text-color-primary;
          }
        }

        &:hover input,
        &.hover input {
          right: 0;
        }
      }

      // 待办列表 - 筛选、设置按钮
      .popup-item {
        position: relative;
        display: inline-block;
        height: 32px;
        line-height: 32px;
        padding: 0 6px;
        font-size: @font-size-sm;
        color: @text-color-primary;
        background: transparent;
        border-radius: 16px;
        cursor: pointer;
        vertical-align: middle;

        span {
          vertical-align: top;
        }

        &:hover {
          background: @item-hover-background;
        }

        &.active {
          background: @item-active-background;

          &::before {
            .absolute(33px false false 50%);

            content: '';
            z-index: 2;
            margin-left: -6px;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 6px solid @component-background;
          }

          &::after {
            .absolute(32px false false 50%);

            content: '';
            margin-left: -7px;
            border-left: 7px solid transparent;
            border-right: 7px solid transparent;
            border-bottom: 7px solid @border-color-base;
          }
        }
      }
    }

    // 待办列表 - 清单
    .lxqp-left-list {
      position: absolute;
      top: 0;
      bottom: 40px;
      width: 100%;
      overflow: auto;

      ul {
        width: 100%;

        li {
          position: relative;
          width: 100%;
          height: 100px;
          padding: 0 15px;
          cursor: pointer;
          transition: all @animation-duration-fast;

          .item-wrap {
            height: 100px;
            padding: 15px 15px 15px 10px;
            overflow: hidden;
            border-bottom: @border-default;

            .desc {
              padding-left: 13px;
            }
          }

          .desc-item {
            line-height: 1;
            color: @text-color-light;
          }

          .title {
            font-size: @font-size-lg;
            color: @text-color-dark;
          }

          &:hover {
            background: @item-hover-background;
          }

          &.active {
            .title {
              font-weight: bold;
              color: @text-color-primary;
            }

            .desc {
              font-weight: bold;
            }

            &::before {
              .absolute(0 false 0 0);

              content: '';
              width: @title-decoration-width;
              background: @title-decoration-color;
            }

            &::after {
              .absolute(50% false false @title-decoration-width);

              content: '';
              margin-top: -6px;
              border-left: 6px solid @primary-color;
              border-top: 6px solid transparent;
              border-bottom: 6px solid transparent;
            }
          }
        }
      }
    }

    // 待办列表 - 向下滚动按钮
    .bottom-scroll-btn {
      .absolute(false false false 0);
      .size(100% 34px);

      padding: 5px;
      background: @component-background;
      box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.1);

      .scroll-btn {
        .size(100% 24px);

        float: left;
        line-height: 24px;
        border: @border-default-light;
        text-align: center;
        cursor: pointer;
      }
    }

    // 待办列表 - 筛选/设置弹窗
    .lxqp-popup {
      .absolute(46px false false 0);

      display: none;
      z-index: 999;
      width: 100%;
      padding: 0 15px;
      background: @component-background;
      opacity: 1 !important;
      box-shadow: @shadow-popup-default;
      transition: all @animation-duration-base;

      .zoom-item {
        transition: all @animation-duration-fast;

        &.zoom {
          padding-top: 0 !important;
          padding-bottom: 0 !important;
          margin-bottom: 0 !important;
          margin-top: 0 !important;
          font-size: @font-size-sm;
        }
      }

      .tit {
        margin-top: 15px;
        line-height: 1;
        font-size: @font-size-base;
        font-weight: bold;
        color: @text-color-dark;
      }

      .precedence {
        margin-top: 5px;
        padding: 15px 15px 0;
        background: @background-lighter;

        .tit {
          margin-top: 0;
        }
      }

      .btns {
        margin: 15px -15px 0;
        padding: 15px;
        text-align: right;
        border-top: @border-default;
      }

      &::before {
        .absolute(-6px false false false);

        content: '';
        border-bottom: 6px solid @component-background;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
      }

      &::before {
        right: 18px;
      }

      &::before {
        right: 65px;
      }
    }

    // 待办列表 - 筛选弹窗 - 流程名称筛选
    .select-flow-wrap {
      position: relative;
      border: @border-default;

      .select-all {
        background: @background-lighter;
      }

      .select-flow-options {
        height: 190px;
        overflow: auto;
      }

      .well-form-group {
        padding: 0 10px;
      }
    }
  }

  &.open {
    .icon .badge {
      display: none;
    }

    .lxqp-left-wrap {
      left: 0;
    }
  }
}

// 流程签批显示状态切换后
.lxqp-wrap.show {
  .top-control {
    top: 0;
  }

  .left-control {
    .icon {
      left: 0;
    }

    .icon-zk {
      display: block;
    }

    .icon-sq {
      display: none;
    }

    &.open {
      .icon {
        left: 450px;
      }

      .icon-zk {
        display: none;
      }

      .icon-sq {
        display: block;
      }
    }
  }
}

// 流程 iframe
.lxqp-iframe {
  .box(fixed);
  .square(100%);

  border: none;
}
