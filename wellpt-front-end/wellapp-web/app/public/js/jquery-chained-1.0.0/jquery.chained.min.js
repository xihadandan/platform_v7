(function(d,c,a,e){function b(h,g){var f=this;f.options=g;f.positionArr=[];f.changeOnSelect=g.changeOnSelect||false;f.$element=d(h).attr({autocomplete:"off",readonly:"readonly"}).addClass("ui-cascader");f.triggerType=g.triggerType==="change"?"mouseenter":"click";f.$content=d('<div class="cascader-content"></div>');f.$content.on("click.cascader",function(i){i.preventDefault();i.stopPropagation()});f.$content.on("click.cascader",".cascader-child li",function(j){var l=d(this);var m=0;f.$content.find(".cascader-child").each(function(n,o){if(d(o).attr("tabindex")==l.parent().attr("tabindex")){m=n}});var i=l.index();f.pushData(m,i);var k=f.popData();if(k.children&&k.children.length>0){f.initChild(k);d.fn.niceScroll&&d(".cascader-child").niceScroll({cursorcolor:"##999"})}else{if(f.triggerType==="mouseenter"){f.$content.find(".cascader-child:gt("+(f.floor)+")").remove();l.off("click").on("click",function(){f.finishInitData()})}else{f.finishInitData(i)}}});f.$element.on(f.triggerType,function(i){i.preventDefault();i.stopPropagation();f.show(i)});f.$content.append(f._tpl(f.nodes=g.nodes));d.fn.niceScroll&&d(".cascader-child").niceScroll({cursorcolor:"##999"})}d.extend(b.prototype,{hide:function(){var f=this;f.$content.slideUp(100,function(){f.$content.detach()});f.$element.siblings("i.iconfont").replaceWith('<i class="iconfont icon-moreunfold"></i>')},show:function(){var f=this;var i=f.$element.offset();var g={left:i.left,top:i.top+f.$element.outerHeight()};d(".ui-front:visible").each(function(k,l){var j=d(l).css("z-index");if(j>0&&(g["z-index"]==null||g["z-index"]<j)){g["z-index"]=parseInt(j,10)+1}});f.$content.css(g).addClass("ui-front");var h=d(a.body).one("click.cascader",function(j){f.hide(j)});f.$content.appendTo(h).slideDown(100);f.$element.siblings("i.iconfont").replaceWith('<i class="iconfont icon-less"></i>')},pushData:function(h,g){var f=this;f.positionArr.length=(f.floor=h);f.positionArr.push(g);console.log(h,g,f.positionArr,"---")},popData:function(){var f=this;var h=f.nodes[f.positionArr[0]];for(var g=1;g<=f.floor;g++){h=h.children[f.positionArr[g]]}return h},getValue:function(){var f=this;var h=[],k=[],l=[];if(f.positionArr.length>0){var j=f.nodes[f.positionArr[0]];l.push(j);h.push(j.id);k.push(j.name);for(var g=1;g<=f.floor;g++){j=j.children[f.positionArr[g]];l.push(j);h.push(j.id);k.push(j.name)}}return{objs:l,ids:h,texts:k,id:h.join("/"),text:k.join("/"),}},setValue:function(h){var f=this;if(typeof h==="string"&&h.indexOf("/")>0){h=h.split("/")}if(d.isArray(h)&&h.length>0){var g=f.nodes;d.each(h,function(j,m){for(var k=0;k<g.length;k++){if(g[k].id==m){f.pushData(j,k);var l=f.popData();g=l.children;if(g.length>0){f.initChild(l)}else{f.finishInitData()}return}}})}},updateActive:function(){var f=this;f.$content.find(".cascader-child:gt("+(f.floor)+")").remove();var h=f.positionArr[f.floor];var g=f.$content.find(".cascader-child:eq("+(f.floor)+")");g.find("li:eq("+h+")").addClass("active").siblings("li").removeClass("active")},triggerSelect:function(){var g=this;var i=g.getValue();var h=g.options.showLastLevels?i.ids[i.ids.length-1]:i.id;var f=g.options.showLastLevels?i.ids[i.texts.length-1]:i.text;g.$element.val(f);g.$element.attr("data-value",h);g.$element.trigger("change",i)},initChild:function(g){var f=this;f.updateActive();f.$content.append(f._tpl(g.children));if(f.changeOnSelect){f.triggerSelect()}},finishInitData:function(){var f=this;f.updateActive();f.hide();f.triggerSelect()},_tpl:function(f){var h='<ul class="cascader-child">';for(var g=0;g<f.length;g++){var j=f[g];if(!j.children||!j.children.length){h+='<li data-index="'+g+'">'+j.name+"</li>"}else{h+='<li data-index="'+g+'">'+j.name+'<i class="iconfont icon-more"></i></li>'}}return h+="</ul>"}});d.fn.cascader=function(f){var h=d(this);var g=h.data("bs.cascader");if(!g){h.data("bs.cascader",(g=new b(this,f)))}else{if(typeof f=="string"){return g[f].apply(g,d.makeArray(arguments).slice(1))}}};d.fn.cascader.Constructor=b})(window.jQuery||window.Zepto,window,document);
;

;
