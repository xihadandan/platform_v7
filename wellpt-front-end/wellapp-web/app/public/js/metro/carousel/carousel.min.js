$.widget("metro.carousel",{version:"3.0.0",options:{auto:!0,period:5e3,duration:1e3,effect:"slide",effectFunc:"linear",direction:"left",controls:!0,controlNext:!1,controlPrev:!1,markers:!0,stop:!0,width:"100%",height:!1,_slides:{},_currentIndex:0,_interval:0,_outPosition:0,_animating:!1},_create:function(){var a=this,b=this.options,c=this.element;$.each(c.data(),function(a,c){if(a in b)try{b[a]=$.parseJSON(c)}catch(d){b[a]=c}}),b._slides=c.find(".slide");var d=0;$.each(b._slides,function(){var a,b=$(this);a=b.outerHeight(),a>d&&(d=a)}),c.css({width:b.width,height:b.height?b.height:d}),b._slides.length<=1||(b.markers&&this._markers(),b.controls&&this._controls(),b.stop&&c.on("mouseenter",function(){clearInterval(b._interval)}).on("mouseleave",function(){a.options.auto&&a._autoStart()}),c.find(".slide").hide(),c.find(".slide:nth-child(1)").show(),b.auto&&this._autoStart(),c.data("carousel",this))},_autoStart:function(){var a=this,b=this.options;b._interval=setInterval(function(){"left"===b.direction?a._slideTo("next"):a._slideTo("prior")},b.period)},_slideTo:function(a){var b,c=this.element,d=this.options,e=d._slides[d._currentIndex];switch(void 0===a&&(a="next"),"prior"===a?(d._currentIndex-=1,d._currentIndex<0&&(d._currentIndex=d._slides.length-1),d._outPosition=this.element.width()):"next"===a&&(d._currentIndex+=1,d._currentIndex>=d._slides.length&&(d._currentIndex=0),d._outPosition=-this.element.width()),b=d._slides[d._currentIndex],this.options.effect){case"switch":this._effectSwitch(e,b);break;case"slowdown":this._effectSlowdown(e,b,this.options.duration);break;case"fade":this._effectFade(e,b,this.options.duration);break;default:this._effectSlide(e,b,this.options.duration)}c.find(".carousel-bullets a").each(function(){var a=$(this).data("num");a===d._currentIndex?$(this).addClass("bullet-on"):$(this).removeClass("bullet-on")})},_slideToSlide:function(a){var b=this.options,c=b._slides[b._currentIndex],d=b._slides[a];if(b._currentIndex===a)return!1;switch(a>b._currentIndex?b._outPosition=-this.element.width():b._outPosition=this.element.width(),this.options.effect){case"switch":this._effectSwitch(c,d);break;case"slowdown":this._effectSlowdown(c,d);break;case"fade":this._effectFade(c,d);break;default:this._effectSlide(c,d)}b._currentIndex=a},_controls:function(){var a,b,c=this,d=this.element,e=this.options;a=$("<span/>").addClass("carousel-switch-next").html("&gt;"),b=$("<span/>").addClass("carousel-switch-prev").html("&lt;"),e.controlNext&&a.html(e.controlNext),e.controlPrev&&b.html(e.controlPrev),a.appendTo(d),b.appendTo(d),e._slides.length>1?(b.on("click",function(){e._animating===!1&&(c._slideTo("prior"),e._animating=!0,setTimeout(function(){e._animating=!1},e.duration))}),a.on("click",function(){e._animating===!1&&(c._slideTo("next"),e._animating=!0,setTimeout(function(){e._animating=!1},e.duration))})):(a.hide(),b.hide())},_markers:function(){var a,b,c,d=this,e=this.options;for(a=$('<div class="carousel-bullets" />'),c=0;c<e._slides.length;c++)b=$('<a class="carousel-bullet" href="javascript:void(0)" data-num="'+c+'"></a>'),0===c&&b.addClass("bullet-on"),b.appendTo(a);a.find("a").on("click",function(b){var c=$(this),f=c.data("num");return a.find("a").removeClass("bullet-on"),c.addClass("bullet-on"),f!==e._currentIndex&&(d._slideToSlide(f),b.preventDefault(),void b.stopPropagation())}),a.appendTo(this.element)},_effectSwitch:function(a,b){$(a).hide(),$(b).css({left:0}).show(),this.element.css({height:$(b).outerHeight()})},_effectSlide:function(a,b){var c=this.options;$(a).animate({left:c._outPosition},c.duration,c.effectFunc),$(b).css("left",c._outPosition*-1).show(),this.element.css({height:$(b).outerHeight()}),$(b).animate({left:0},c.duration,c.effectFunc)},_effectSlowdown:function(a,b){var c=this.options,d={duration:c.duration,easing:"doubleSqrt"};$.easing.doubleSqrt=function(a){return Math.sqrt(Math.sqrt(a))},$(a).animate({left:c._outPosition},d),$(b).css("left",c._outPosition*-1).show(),this.element.css({height:$(b).outerHeight()}),$(b).animate({left:0},d)},_effectFade:function(a,b){var c=this.options;$(a).fadeOut(c.duration),$(b).css({left:0}).fadeIn(c.duration),this.element.css({height:$(b).outerHeight()})},slideTo:function(a){this._slideToSlide(a)},nextSlide:function(){this._slideTo("next")},priorSlide:function(){this._slideTo("prior")},_destroy:function(){},_setOption:function(a,b){this._super("_setOption",a,b)}});