<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=10">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-store"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <meta name="google" value="notranslate">
    <title>{{ title }}</title>
    {% for c in css %}
      <link href="{{c.path}}?v={{helper.resVer()}}" rel="stylesheet">
    {% endfor %}
  </head>

  <body>
    <div class="container-fluid">
      <div class="row">
        <div style="width: 100%" id="dyform-container">
          <div class="widget-box widget-color-blue">
            <div class="widget-header fixed">
              <div class="widget-header-fill-top"></div>
              <h5 class="widget-title">{{title}}</h5>
              <div class="widget-toolbar no-border dms-widget-toolbar"></div>
              <div class="widget-header-fill-bottom"></div>
            </div>
            <div class="widget-body" style="padding-bottom:0;">
              <div class="widget-main ace-scroll scroll-disabled" style="position: relative; overflow: scroll;overflow-x:auto;  height: calc(100vh);">
                <!-- 业务数据 -->
                <form name="dms-data-form" action="dms_data_dyform_view" style="display: none;">
                  <input type="hidden" id="dms_dmsId" name="dms_dmsId" value="{{dms_id}}">
                  <input type="hidden" id="dms_documentViewModule" name="dms_documentViewModule" value="{{documentViewModule}}">
                  <input type="hidden" id="dms_formUuid" name="dms_formUuid" value="{{formUuid}}">
                  <input type="hidden" id="dms_dataUuid" name="dms_dataUuid" value="{{dataUuid}}">
                  <input type="hidden" id="target" name="target" value="{{target}}">
                  <input type="hidden" id="dms_acId" name="dms_acId" value="{{acId}}">
                  {% for key, value in extraParams %}
                    <input id="{{key}}" name="{{key}}" type="hidden" value="{{value}}"/>
                  {% endfor %}
                </form>

                <!-- 动态表单 -->
                <form id="dyform"></form>
              </div>
            </div>
            <div class="widget-footer-fill-top"></div>
          </div>
        </div>

      </div>
    </div>

  </body>
  {% if paceDisabled === false %}
    {# 禁止 pace 进度跟踪websocket请求 #}
    <script type="text/javascript" data-pace-options='{"ajax":{"trackWebSockets":false}}' src="{{helper.staticPrefix()}}/js/pace/pace.min.js"></script>
  {% endif %}
  <script type="text/javascript" src="{{helper.staticPrefix()}}/js/requirejs/require.js"></script>
  <script>

    var ctx = '';
    window.staticPrefix = '{{helper.staticPrefix()}}';
    window.backendUrl = '{{helper.backendUrl()}}';
    var WebApp = WebApp || {};
    WebApp.widgetDefinitions = {
      '{{dms_id}}': {{ widgetConfigurationJSON | safe }}
    };
    WebApp.pageDefinition = {};
    WebApp.configJsModules = {};
    WebApp.extraParams = {{ extraParamsJSON | safe }};
    WebApp.jsTemplates = {};
    requirejs.onError = function (error) {
      throw error;
    }

    requirejs.config({{ requirejsConfigJSON | safe }});

    require({{javascriptsJson |safe}}, function () {
      require(["js/app"], function () {
        require(["js/dms/document/dms_document_view"]);
      });
    });
  </script>

</html>
